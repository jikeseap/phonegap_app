<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>network</title>
		<meta name="description" content="">
		<meta name="author" content="Apostolis Mamaras">
		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova_plugins.js"></script>
		<script type="text/javascript" charset="utf-8" src="Connection.js"></script>
		<script type="text/javascript" charset="utf-8" src="network.js"></script>
		<script type="text/javascript" charset="utf-8">
		
		// Wait for PhoneGap to load
    document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
        checkConnection();
    }
    
   
//	var myVar = setInterval(function () {checkConnection();}, 100);
    function checkConnection() {
        var networkState = navigator.connection.type;
        var states = {};
        states[Connection.UNKNOWN]  = 'Unknown connection';
        states[Connection.ETHERNET] = 'Ethernet connection';
        states[Connection.WIFI]     = 'WiFi connection';
        states[Connection.CELL_2G]  = 'Cell 2G connection';
        states[Connection.CELL_3G]  = 'Cell 3G connection';
        states[Connection.CELL_4G]  = 'Cell 4G connection';
        states[Connection.NONE]     = 'No network connection';
      //  alert('Connection type: ' + states[networkState]);
     
       
        	if((states[networkState] == "No network connection") || (states[networkState] == "Unknown connection")){
        		window.setInterval(function(){alert("Your phoneâ€™s web connection is not working. Please check and relaunch app");}, 5000);
        		window.location="network.html";
        		}
        else
        {
        	//<meta http-equiv="refresh" content="3; url=network.html">
        	alert('Connection type: ' + states[networkState]);
        	window.setInterval(function(){(window.location="contacts.html");}, 300);
        	
        }
    }
    </script>
  </head>
  <body>
    <p>A dialog box will report the network state.</p>
   
  </body>
</html>
